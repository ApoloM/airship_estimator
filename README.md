# airship_estimator

This package was developed for the [NOAMAY](https://revistapesquisa.fapesp.br/2018/05/23/dirigivel-sobre-a-floresta/) airship from project DRONI. 

The package contains algorithms for estimation of pose and velocity of the airship. Also, it include algorithms for estimation of the wind incident in the airship body. 


## First steps
It is a pre-requisite to have ROS melodic installed. You can found it in [ROS wiki](http://wiki.ros.org/ROS/Installation). After the ROS isntallation follow the following steps.

1. Clone this project;

2. Install [robot_localization](https://wiki.ros.org/robot_localization);

3. Download the files [data_set.bag](https://www.dropbox.com/s/abjkcnbxy7qy39h/data_set.bag?dl=0), [wind_estimator_validating_test_1.bag](https://www.dropbox.com/s/abjkcnbxy7qy39h/wind_estimator_validating_test_1.bag?dl=0) and [wind_estimator_validating_test_2.bag](https://www.dropbox.com/s/abjkcnbxy7qy39h/wind_estimator_validating_test_2.bag?dl=0). Save them inside the project in a folder named bag_files/.

4. Running command below you can test with the installation was successfully completed.
```
roslaunch airship_estimator play_data_set.launch
```

## Pose Estimation

The algorithms available are: Extended Kalman Filter (EKF), Unscented Kalman Filter (UKF) and Low-pass Filter (LPF).

### Visual results

[LPF](https://youtu.be/VL5dvCyOZwY)

[EKF](https://youtu.be/jaATwV0rG30)

[UKF](https://youtu.be/B26xaKtAyWo)
### How to use

You can configure UKF and EKF parameters by editing the file:
```
config/ukf_params.yaml
```
You can configure LPF parameters by editing the file:
```
launch/lpf.launch
```
You can configure Acceleration correction parameters by editing the file:
```
config/accel_estimator_params.yaml
```

In files ```launch/play_data_set.launch``` and ```launch/play_results.launch``` you can comment/uncomment some lines to change between EKF/UKF/LPF filters as you want.

Before running ```launch/play_results.launch``` you will have to change the name of the bag file inside the launch with the one generated by ```launch/play_data_set.launch```.

## Wind Estimators

This package presents four alternative versions for estimation of wind velocity, namely: two Extended Kalman Filter approaches (or model-based approaches); a Neural Network (or data-driven approach); and a hybrid estimator which performs a fusion between the model-based and data-driven estimators. The training dataset used for the Neural Network can be found [here](https://www.dropbox.com/s/abjkcnbxy7qy39h/wind_estimator_training_dataset.bag?dl=0)


## Other Resources
Further details can be found in the papers below: 

[Comparative study for Robotic Airship State estimation with LPF, EKF and UKF](https://proceedings.science/sbai-2019/papers/comparative-study-for-robotic-airship-state-estimation-with-lpf--ekf-and-ukf)

[Hybrid Model-Based and Data-Driven Wind Velocity Estimator for the Navigation System of a Robotic Airship](https://arxiv.org/abs/1907.06266)

## How to cite
If you find this code useful in your research, please consider citing:

    @inproceedings{marton2019SBAI,
        year = {2019},
        month = {oct},
        author = { Marton, A. S. and Nogueira, L. A. C. de O. and Fioravanti, A. and de Paiva, E. C.},
        title = {Comparative study for Robotic Airship State estimation with {LPF}, {EKF} and {UKF}},
        booktitle = {2019 {SBAI} - XIV  Simp{\'{o}}sio Brasileiro de Automa{\c{c}}{\~{a}}o Inteligente}
    }
    
    @misc{marton2019arXiv,
        title={Hybrid Model-Based and Data-Driven Wind Velocity Estimator for the Navigation System of a Robotic Airship},
        author={Apolo Silva Marton and André Ricardo Fioravanti and José Raul Azinheira and Ely Carneiro de Paiva},
        year={2019},
        eprint={1907.06266},
        archivePrefix={arXiv},
        primaryClass={eess.SY}
    }
  
